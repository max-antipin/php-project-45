#!/usr/bin/env php
<?php

declare(strict_types=1);

namespace BrainGames\Cli;

require_once(__DIR__ . '/../vendor/autoload.php');

use function cli\line;
use function cli\prompt;

function getGCD(int $a, int $b): int {
    return $b === 0? $a : getGCD($b, $a % $b);
}
$name = promptAndPrintName();
line('Find the greatest common divisor of given numbers.');
for ($i = 0; $i < 3; ++$i) {
    $n0 = \mt_rand(0, 99);
    $n1 = \mt_rand(0, 99);
    line('Question: %s', "$n0 $n1");
    $answer = prompt('Your answer');
    $correctAnswer = getGCD($n0, $n1);
    $is_correct = (int)$answer === $correctAnswer;
    line(
        $is_correct ? 'Correct!'
        : "'$answer' is wrong answer ;(. Correct answer was '$correctAnswer'." . PHP_EOL . "Let's try again, $name!"
    );
    if (!$is_correct) {
        return;
    }
}
line("Congratulations, $name!");
